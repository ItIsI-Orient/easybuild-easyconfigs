easyblock = 'PythonBundle'

name = 'Hydra'
version = '1.3.2'

homepage = "https://hydra.cc/"
description = """
Hydra is an open-source Python framework that simplifies the development of
research and other complex applications. The key feature is the ability to
dynamically create a hierarchical configuration by composition and override it
through config files and the command line. The name Hydra comes from its
ability to run multiple similar jobs - much like a Hydra with multiple heads.
"""

github_account = 'facebookresearch'

toolchain = {'name': 'foss', 'version': '2023a'}

builddependencies = [
    ('binutils', '2.40'),
    ('Java', '17', '', SYSTEM),  # needed by ANTLR runtime
    ('hatchling', '1.18.0'),
]

dependencies = [
    ('Python', '3.11.3'),
    ('PyYAML', '6.0'),  # needed by omegaconf
    ('tqdm', '4.66.1'),
    ('SciPy-bundle', '2023.07'),
    ('optuna', '2.10.1')
]

use_pip = True
sanity_pip_check = True

exts_list = [
    ('antlr4-python3-runtime', '4.9', {
        'modulename': 'antlr4',
        'checksums': ['02d9afb720c13c52b336234286966cdf5aff704f230a513e635adb0d94de97ae'],
    }),
    ('omegaconf', '2.3.0', {
        'checksums': ['d5d4b6d29955cc50ad50c46dc269bcd92c6e00f5f90d23ab5fee7bfca4ba4cc7'],
    }),
    ('read_version', '0.3.2', {
        'checksums': ['3f2d30852bce9174b244f7f29aaebf4e79904c6ed51a19716325015ff306ce3f'],
    }),
    ('hydra-optuna-sweeper', '1.2.0', {
       'modulename': False,
       'checksums': ['f20b56dfdc4db9f84f3b502c8e60a5269967197c4df4c28653cf17f71b2136ce'],
    }),
    ('cloudpickle', '3.0.0', {
        'checksums': ['996d9a482c6fb4f33c1a35335cf8afd065d2a56e973270364840712d9131a882'],
    }),
    ('submitit', '1.5.0', {
        'checksums': ['2766868e71656b1e278a42f33bced74faebf2c525dba74f4cc43be8cbef6c588'],
    }),
    ('hydra-submitit-launcher', '1.2.0', {
        'modulename': False,
        'checksums': ['e14c8eb46d020fac60ba25f82bcc368dc55851d2683dc95c88631ffcf15e4a34'],
    }),
    ('hydra', version, {
        'source_urls': ['https://github.com/%(github_account)s/%(namelower)s/archive'],
        'sources': ['v%(version)s.tar.gz'],
        'checksums': ['3f0f14305e9c6ae4b1dbcba344fe09dd0fc79c0a0656470c249f4f7ca46bf471'],
    }),
]

moduleclass = 'data'
