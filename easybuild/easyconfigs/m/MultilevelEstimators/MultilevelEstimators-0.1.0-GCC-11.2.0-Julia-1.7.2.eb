easyblock = 'Tarball'

name = 'MultilevelEstimators'
version = '0.1.0'
local_julia_ver = '1.7.2'
versionsuffix = "-Julia-%s" % local_julia_ver

homepage = 'https://github.com/PieterjanRobbe/MultilevelEstimators.jl'
description = "The Julia module for Multilevel Monte Carlo methods"

toolchain = {'name': 'GCC', 'version': '11.2.0'}

dependencies = [
    ('Python', '3.9.6'),
    ('Julia', local_julia_ver, '-linux-%s' % ARCH, True),
]

postinstallcmds = [
    "cd %(installdir)s && mkdir pkgs",
    """export JULIA_DEPOT_PATH=%%(installdir)s/pkgs && 
    julia -e 'using Pkg;Pkg.add(url="%s")' """ % homepage
]

sanity_check_paths = {
    'files': [],
    'dirs': ["pkgs"]
}

modextrapaths = {'JULIA_DEPOT_PATH': 'pkgs'}

moduleclass = 'lib'
